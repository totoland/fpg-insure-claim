<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:toto="http://java.sun.com/jsf/composite/components"
                template="/WEB-INF/template.xhtml"
                xmlns:fnc="http://myco.co.uk/fnc"
                >

    <ui:define name="subheader">
        <h:outputStylesheet library="primefaces O-adamantium" name="theme.css" />
    </ui:define>

    <ui:define name="content">
        <h:form id="form">
            <div class="Container100">
                <div class="ContainerIndent">
                    <div class="Card">
                        <div class="CardTopic"> 
                            <i class="icon-document-stroke Fs30 Fleft MarRight10"></i>
                            <div class="EmptyBox10 ShowOnMobile"></div>
                            #{msg.menu_marine_insure} 
                            <div class="EmptyBox10 ShowOnMobile"></div>
                            <p:commandButton value="#{msg.option_truck}" icon="fa fa-cab" styleClass="Fright PurpleButton FloatNoneOnMobile" 
                                             update="selectInsureType , lbCertNumber , selectInsureType2"
                                             rendered="false"
                                             process="@this"
                                             action="#{insuranceFormController.selectInsureType(3)}"/>
                            <p:commandButton value="#{msg.option_vessel}" icon="fa fa-ship" styleClass="Fright GreenButton FloatNoneOnMobile" 
                                             rendered="false"
                                             update="selectInsureType , lbCertNumber , selectInsureType2" 
                                             process="@this"
                                             action="#{insuranceFormController.selectInsureType(2)}"/>
                            <p:commandButton value="#{msg.option_air}" icon="fa fa-plane" styleClass="Fright FloatNoneOnMobile" 
                                             rendered="false"
                                             process="@this"
                                             update="selectInsureType , lbCertNumber , selectInsureType2" 
                                             action="#{insuranceFormController.selectInsureType(1)}"/> 
                            <br/>
                        </div>

                        <div class="SeparatorFull"></div>
                        <div class="Container90 Responsive90">
                            <div class="ContainerIndent">
                                <h2 class="BigTopic"></h2>
                                <p:panelGrid columns="4" layout="grid" style="border:0px !important; background:none;" styleClass="ui-panelgrid-blank">
                                    <h:outputLabel value="#{msg.label_Policy_number}"/>
                                    <h:outputLabel value="#{insuranceFormController.claimInsure.policyNumber}"/>
                                    <h:outputLabel value="#{msg.label_status}"/>
                                    <h:outputLabel value="#{insuranceFormController.getCurrentStatus(insuranceFormController.claimInsure.claimStatusId)}"/>
                                    <h:outputLabel value="#{msg.label_cert_no}"/>
                                    <h:outputLabel id="lbCertNumber" value="#{insuranceFormController.certNumber}"/>
                                    <h:outputLabel value=""/>
                                    <h:outputLabel value=""/>
                                    <h:outputLabel value="#{msg.label_method_of_transport}" rendered="false"/>
                                    <h:outputLabel id="selectInsureType" value="#{insuranceFormController.claimInsure.methodOfTransportId}" rendered="false"/>
                                </p:panelGrid>
                            </div>
                        </div>
                        <div class="Container50 Responsive50">
                            <div class="ContainerIndent">
                                <!--<h2 class="BigTopic">TextArea</h2>-->
                                <!--<p:inputTextarea rows="5" placeholder="Your Message" />-->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="Container100">
                <div class="ContainerIndent">
                    <div class="Card">
                        <div class="CardTopic"> 
                            #{msg.label_general} 
                        </div>

                        <div class="SeparatorFull"></div>
                        <fnc:disablePanel disabled="#{insuranceFormController.readOnly}">
                            <p:panelGrid id="pnGrid" 
                                         columns="4" 
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4" 
                                         layout="grid"  
                                         styleClass="ui-panelgrid-blank" 
                                         style="border:0px none; background-color:transparent;">
                                <h:outputLabel value="#{msg.label_insured_name}"/>
                                <h:panelGroup id="pnEditInsuredName">
                                    <p:inplace id="editInsuredName" editor="#{!insuranceFormController.readOnly}">
                                        <p:inputText id="insuredId"
                                                     value="#{insuranceFormController.claimInsure.insuredName}" 
                                                     required="true"
                                                     requiredMessage="#{msg.require_generic}"/>
                                        <toto:requireLabel forId="form:insuredId"/>
                                    </p:inplace>
                                    <script>
                                        $('#form\\:insuredId').bind('keypress', function (e) {
                                            if (e.keyCode == 13) {
                                                $("#form\\:editInsuredName_editor").find("button")[0].click();
                                                return false;
                                            }
                                        });
                                    </script>
                                </h:panelGroup>
                                <h:outputLabel  value="#{msg.label_consignee_name}"/>
                                <p:inputText id="consigneeName" value="#{insuranceFormController.claimInsure.consigneeName}"/>

                                <h:outputLabel value="Invoice Value" title="invoice*exchange rate*valuation"/>
                                <pe:inputNumber id="invoiceValue" value="#{insuranceFormController.claimInsure.invoiceValue}"
                                                decimalPlaces="2"
                                                maxValue="1000000000">
                                    <p:ajax event="blur" listener="#{insuranceFormController.calAmountOfInsurance()}"
                                            process="@this , :form:valuation"
                                            update=":form:amountOfInsurance, :form:localAmountOfInsurance , :form:dtRate"/>
                                </pe:inputNumber>

                                <h:outputLabel value="#{msg.label_valuation}"/>
                                <h:panelGroup>
                                    <p:selectOneMenu id="valuation" 
                                                     value="#{insuranceFormController.claimInsure.valuation}">
                                        <f:selectItem/>
                                        <f:selectItems value="#{insuranceFormController.dropdownFactory.getValuation(insuranceFormController.claimInsure.policyNumber)}"
                                                       var="item" 
                                                       itemLabel="#{item.name}"
                                                       itemValue="#{item.value}"/>
                                        <p:ajax listener="#{insuranceFormController.calAmountOfInsurance()}"
                                                process="@this , :form:invoiceValue , :form:amountOfInsurance , :form:localAmountOfInsurance"
                                                update=":form:amountOfInsurance , :form:invoiceValue , :form:localAmountOfInsurance , :form:dtRate"/>
                                    </p:selectOneMenu>
                                    <toto:requireLabel forId="form:insuredId"/>
                                </h:panelGroup>

                                <h:outputLabel value="#{msg.label_amount_of_insurance}"/>
                                <pe:inputNumber id="amountOfInsurance" disabled="true"
                                                value="#{insuranceFormController.claimInsure.amountOfInsurance}"
                                                decimalPlaces="2" maxValue="99999999999999.99" maxlength="30"/>

                                <h:outputLabel value="#{msg.label_deductible_amount}"/>
                                <h:outputLabel value="#{insuranceFormController.claimInsure.deductibleAmount}"/>

                                <h:outputLabel value="#{msg.label_currency_type}"/>
                                <h:panelGroup>
                                    <p:selectOneMenu id="currencyType"
                                                     required="true"
                                                     requiredMessage="#{msg.require_generic}"
                                                     rendered="#{!insuranceFormController.readOnly}"
                                                     value="#{insuranceFormController.claimInsure.currencyType}">
                                        <p:ajax event="change" 
                                                listener="#{insuranceFormController.onCurrencyChange()}"
                                                process="@this ,:form:valuation , :form:invoiceValue , :form:amountOfInsurance"
                                                update=":form:exchangeRate ,:form:localAmountOfInsurance , :form:dtRate"/>
                                        <f:selectItem itemLabel="" itemValue="" />
                                        <f:selectItems value="#{insuranceFormController.currencyTypeList}"
                                                       var="item" itemLabel="#{item.name}" itemValue="#{item.value}" />
                                    </p:selectOneMenu>
                                    <toto:requireLabel forId="form:currencyType" rendered="#{!insuranceFormController.readOnly}"/>
                                    <h:outputLabel value="#{insuranceFormController.claimInsure.currencyType}" rendered="#{insuranceFormController.readOnly}"/>
                                </h:panelGroup>

                                <h:outputLabel value="#{msg.label_exchange_rate}"/>
                                <pe:inputNumber id="exchangeRate" value="#{insuranceFormController.claimInsure.exchangeRate}"
                                                decimalPlaces="4"
                                                disabled="true"/>

                                <h:outputLabel value="Insured Value (THB)"/>
                                <h:panelGroup>
                                    <pe:inputNumber id="localAmountOfInsurance" disabled="true"
                                                    value="#{insuranceFormController.claimInsure.insuredValue}"
                                                    maxValue="99999999999999.99" maxlength="30"
                                                    decimalPlaces="0" roundMethod="U">
                                    </pe:inputNumber>
                                    <toto:requireLabel forId="form:localAmountOfInsurance"/>
                                </h:panelGroup>

                                <h:outputLabel value=""/>
                                <h:outputLabel value=""/>

                                <h:outputLabel value="#{msg.label_origin_country}"/>
                                <h:panelGroup>
                                    <p:selectOneMenu id="originCountryCode"
                                                     filter="true"
                                                     required="true"
                                                     requiredMessage="#{msg.require_generic}"
                                                     value="#{insuranceFormController.claimInsure.originCountryCode}">
                                        <f:selectItem itemLabel="" itemValue=""/>
                                        <f:selectItems value="#{insuranceFormController.countriesList}" 
                                                       var="item"
                                                       itemLabel="#{item.name}"
                                                       itemValue="#{item.value}"/>
                                    </p:selectOneMenu>
                                    <toto:requireLabel forId="form:originCountryCode"/>
                                </h:panelGroup>

                                <h:outputLabel value="#{msg.label_origin_desc}"/>
                                <h:panelGroup>
                                    <p:inputText id="originDescription" 
                                                 required="true"
                                                 requiredMessage="#{msg.require_generic}"
                                                 value="#{insuranceFormController.claimInsure.originDescription}"/>
                                    <toto:requireLabel forId="form:originDescription"/>
                                </h:panelGroup>

                                <h:outputLabel value="#{msg.label_transshipment_port}"/>
                                <p:inputText value="#{insuranceFormController.claimInsure.transshipmentPort}"/>

                                <h:outputLabel/>
                                <h:outputLabel/>

                                <h:outputLabel value="#{msg.label_destination_country}"/>
                                <h:panelGroup>
                                    <p:selectOneMenu id="destinationCountryCode" 
                                                     filter="true"
                                                     required="true"
                                                     requiredMessage="#{msg.require_generic}"
                                                     value="#{insuranceFormController.claimInsure.destinationCountryCode}">
                                        <f:selectItem itemLabel="" itemValue=""/>
                                        <f:selectItems value="#{insuranceFormController.countriesList}" 
                                                       var="item"
                                                       itemLabel="#{item.name}"
                                                       itemValue="#{item.value}"/>
                                    </p:selectOneMenu>
                                    <toto:requireLabel forId="form:destinationCountryCode"/>
                                </h:panelGroup>

                                <h:outputLabel value="#{msg.label_destination_desc}"/>
                                <h:panelGroup>
                                    <p:inputText id="destinationDescription"
                                                 required="true"
                                                 requiredMessage="#{msg.require_generic}"
                                                 value="#{insuranceFormController.claimInsure.destinationDescription}"/>
                                    <toto:requireLabel forId="form:destinationDescription"/>
                                </h:panelGroup>
                                <h:outputLabel value="#{msg.label_conveyance_name}"/>
                                <h:panelGroup>
                                    <p:inputText id="conveyanceName" 
                                                 value="#{insuranceFormController.claimInsure.conveyanceName}"
                                                 required="true"
                                                 requiredMessage="#{msg.require_generic}"/>
                                    <toto:requireLabel forId="form:conveyanceName"/>
                                </h:panelGroup>
                                <h:outputLabel value="#{msg.label_transshipment_vessel}"/>
                                <p:inputText value="#{insuranceFormController.claimInsure.transshipmentVessel}"/>

                                <h:outputLabel value="#{msg.label_voyage_flight_no}"/>
                                <h:panelGroup>
                                    <p:inputText id="voyageFlightNumber" 
                                                 required="true"
                                                 requiredMessage="#{msg.require_generic}"
                                                 value="#{insuranceFormController.claimInsure.voyageFlightNumber}"/>
                                    <toto:requireLabel forId="form:voyageFlightNumber"/>
                                </h:panelGroup>
                                <h:outputLabel value="#{msg.label_method_of_transport}"/>
                                <h:panelGroup>
                                    <p:selectOneMenu id="selectInsureType2" 
                                                     required="true"
                                                     requiredMessage="#{msg.require_generic}"

                                                     value="#{insuranceFormController.claimInsure.methodOfTransportId}">
                                        <p:ajax event="change" 
                                                listener="#{insuranceFormController.onMethodOfTransportChange()}"
                                                process="@this"
                                                update=":form:shipmentDate"/>
                                        <f:selectItem itemLabel="" itemValue=""/>
                                        <f:selectItems value="#{insuranceFormController.dropdownFactory.ddlMethodOfTransport()}" 
                                                       var="item"
                                                       itemLabel="#{item.name}"
                                                       itemValue="#{item.value}"/>
                                    </p:selectOneMenu>
                                    <toto:requireLabel forId="form:selectInsureType2"/>
                                </h:panelGroup>

                                <h:outputLabel value="#{msg.label_invoice}"/>
                                <h:panelGroup>
                                    <p:inputText id="invoiceNumber"
                                                 value="#{insuranceFormController.claimInsure.invoiceNumber}"
                                                 required="true"
                                                 requiredMessage="#{msg.require_generic}" />
                                    <toto:requireLabel forId="form:invoiceNumber"/>
                                </h:panelGroup>

                                <h:outputLabel value="#{msg.label_bill_of_lading_number}"/>
                                <p:inputText value="#{insuranceFormController.claimInsure.billOfLadingNumber}"/>

                                <h:outputLabel value="#{msg.label_shipment_date}"/>
                                <h:panelGroup>
                                    <p:calendar id="shipmentDate" 
                                                required="true"
                                                requiredMessage="#{msg.require_generic}"
                                                readonlyInput="true"
                                                pattern="dd MMM yyyy" 
                                                value="#{insuranceFormController.claimInsure.shipmentDate}" 
                                                mindate="#{insuranceFormController.minShipmentDate}">
                                    </p:calendar>
                                    <toto:requireLabel forId="form:shipmentDate"/>
                                </h:panelGroup>

                                <h:outputLabel value="#{msg.label_issue_date}"/>
                                <h:panelGroup>
                                    <p:calendar id="calendar" pattern="dd MMM yyyy" 
                                                placeholder="#{msg.require_field}" 
                                                readonlyInput="true"
                                                disabled="true"
                                                value="#{insuranceFormController.claimInsure.issueDate}">
                                        <p:ajax event="dateSelect" update=":form:shipmentDate :form:upMessages" />
                                    </p:calendar>
                                    <toto:requireLabel forId="form:calendar"/>
                                </h:panelGroup>
                                <h:outputLabel value="#{msg.label_commodity_type}"/>
                                <h:panelGroup>
                                    <p:selectOneMenu id="commodityTypeId" 
                                                     filter="true" filterMatchMode="contains"                                                                                                                     
                                                     required="true"
                                                     requiredMessage="#{msg.require_generic}"
                                                     value="#{insuranceFormController.claimInsure.commodityTypeCode}">
                                        <f:selectItem itemLabel="" itemValue=""/>
                                        <f:selectItems value="#{insuranceFormController.commodityTypeList}" 
                                                       var="item" itemLabel="#{item.name}" itemValue="#{item.value}"/>
                                    </p:selectOneMenu>
                                    <toto:requireLabel forId="form:commodityTypeId"/>

                                    <!--                                    <p:commandButton icon="fa fa-plus White" 
                                                                                         styleClass="GreenButton" 
                                                                                         process="@this"
                                                                                         update=":form:dgCommodityTypeId"
                                                                                         oncomplete="PF('dgCommodityTypeId').show()"/>-->
                                </h:panelGroup>

                                <h:outputLabel value="#{msg.label_commodity_description}"/>
                                <p:inputTextarea value="#{insuranceFormController.claimInsure.commodityDescription}"/>

                                <h:outputLabel value="#{msg.label_marks_and_numbers}"/>
                                <p:inputTextarea value="#{insuranceFormController.claimInsure.marksAndNumbers}"
                                                 rows="15" cols="69" maxlength="1035"/>

                                <h:outputLabel value="#{msg.label_coverage_type}"/>
                                <h:panelGroup>
                                    <p:selectOneMenu id='coverageTypeId'  
                                                     required="true"
                                                     requiredMessage="#{msg.require_generic}"
                                                     value="#{insuranceFormController.claimInsure.coverageTypeId}">
                                        <f:selectItems value="#{insuranceFormController.coverageTypeList}"
                                                       var="item" itemLabel="#{item.name}" itemValue="#{item.value}" />
                                    </p:selectOneMenu>
                                    <toto:requireLabel forId="form:coverageTypeId"/>
                                </h:panelGroup>


                                <h:outputLabel value="#{msg.label_insuring_terms}"/>
                                <p:selectOneMenu  value="#{insuranceFormController.claimInsure.insuringTermsId}">
                                    <f:selectItems value="#{insuranceFormController.insuringTermsTypeList}" 
                                                   var="item"
                                                   itemLabel="#{item.name}"
                                                   itemValue="#{item.value}"/>
                                </p:selectOneMenu>

                                <h:outputLabel value="#{msg.label_additional_info}"/>
                                <p:inputTextarea value="#{insuranceFormController.claimInsure.additionalInfomation}"/>

                                <h:outputLabel value="#{msg.label_claim_surveyor}"/>
                                <h:panelGroup>
                                    <p:selectOneMenu id="claimSurveyorId" 
                                                     filter="true" filterMatchMode="contains"
                                                     required="true"
                                                     requiredMessage="#{msg.require_generic}"
                                                     value="#{insuranceFormController.claimInsure.claimSurveyorId}">
                                        <p:ajax event="change"
                                                listener="#{insuranceFormController.onClaimSurveyorChange}"
                                                process="@this" resetValues="true"
                                                update=":form:claimSurveyorDesc" 
                                                oncomplete="if($('#form\\:claimSurveyorId_input').val()==''){$('#form\\:claimPayableAtAddress').html('');$('#form\\:claimPayableAtCompany').html('');$('#form\\:claimPayableAtTel').html('');$('#form\\:claimPayableAtFax').html('')}"/>
                                        <f:selectItem itemLabel="" itemValue=""/>
                                        <f:selectItems value="#{insuranceFormController.claimSurveyorsList}"
                                                       var="item" itemLabel="#{item.name}" itemValue="#{item.value}" />
                                    </p:selectOneMenu>
                                    <toto:requireLabel forId="form:claimSurveyorId"/>
                                </h:panelGroup>

                                <h:outputLabel value="#{msg.label_claim_payable_at}"/>
                                <h:panelGroup id="claimSurveyorDesc">
                                    <h:outputLabel id="claimPayableAtCompany" value="#{insuranceFormController.claimInsure.claimPayableAtCompany}"/>
                                    <br/>
                                    <h:outputLabel id="claimPayableAtAddress" value="#{insuranceFormController.claimInsure.claimPayableAtAddress}"/>
                                    <br/>
                                    <h:outputLabel id="claimPayableAtTel" value="#{insuranceFormController.claimInsure.claimPayableAtTel}"/>
                                    <br/>
                                    <h:outputLabel id="claimPayableAtFax" value="#{insuranceFormController.claimInsure.claimPayableAtFax}"/>
                                </h:panelGroup>

                                <p:growl id="upMessages" showDetail="true" />
                                <!--                                <h:outputLabel value="Shiping Marks upload"/>
                                                                <h:panelGroup>
                                                                    <p:fileUpload id="imgUpload" fileUploadListener="#{insuranceFormController.handleFileUpload}" 
                                                                                  mode="advanced" auto="true" dragDropSupport="true"
                                                                                  update="form:gimPhoto" sizeLimit="102400" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" />
                                                                    <p:growl id="upMessages" showDetail="true" />
                                                                </h:panelGroup>
                                                                <p:graphicImage id="gimPhoto" url="#{insuranceFormController.imageUploadURL}"
                                                                                style="width: 100px"/>-->
                            </p:panelGrid>
                        </fnc:disablePanel>
                        <div class="Container50 Responsive50">
                            <div class="ContainerIndent">
                                <!--<h2 class="BigTopic">TextArea</h2>-->
                                <!--<p:inputTextarea rows="5" placeholder="Your Message" />-->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <p:dialog id="dgCommodityTypeId" widgetVar="dgCommodityTypeId" showEffect="true" modal="true">
                <p:dataTable var="item" value="#{insuranceFormController.commodityTypeList}" 
                             selectionMode="single"
                             selection="#{insuranceFormController.selectedCommodityType}"
                             rowKey="#{item}"
                             reflow="true">
                    <p:ajax event="rowSelect" listener="#{insuranceFormController.onRowselectedCommodityType}" 
                            update=":form:commodityTypeId" oncomplete="PF('dgCommodityTypeId').hide()"/>
                    <p:column headerText="Code">
                        <h:outputText value="#{item.value}" />
                    </p:column>
                    <p:column headerText="Name">
                        <h:outputText value="#{item.name}" />
                    </p:column>
                </p:dataTable>
            </p:dialog>

            <div class="Container100">
                <div class="ContainerIndent">

                    <div class="Card">
                        <div class="CardTopic"> 
                            #{msg.label_rate_schedule} 
                        </div>

                        <div class="SeparatorFull"></div>
                        <fnc:disablePanel disabled="#{insuranceFormController.readOnly}">
                            <p:panelGrid id="pnGridRate" 
                                         columns="2" 
                                         layout="grid"
                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4" 
                                         styleClass="ui-panelgrid-blank" 
                                         style="border:0px none; background-color:transparent;">
                                <h:outputLabel value="#{msg.label_rate_schedule}"/>
                                <h:panelGroup>
                                    <p:selectOneMenu id="rateScheduleId" 
                                                     required="true" 
                                                     requiredMessage="#{msg.require_generic}"
                                                     value="#{insuranceFormController.claimInsure.rate}">
                                        <p:ajax listener="#{insuranceFormController.onRateScheduleChange()}"
                                                process="@this , :form:amountOfInsurance , :form:localAmountOfInsurance"
                                                update=":form:dtRate" />
                                        <f:selectItem itemLabel="" itemValue="0" />
                                        <f:selectItems value="#{insuranceFormController.rateScheduleList}" 
                                                       var="item"
                                                       itemLabel="#{item.name}"
                                                       itemValue="#{item.value}"/>
                                    </p:selectOneMenu>
                                    <toto:requireLabel forId="form:insuredId"/>
                                </h:panelGroup>

                            </p:panelGrid>
                            <p:dataTable value="#{1}" id="dtRate" reflow="true">
                                <p:column headerText="#{msg.label_premium_type}">
                                    <h:outputLabel value="Marine"/>
                                </p:column>
                                <p:column headerText="#{msg.label_amount_of_insurance}">
                                    <h:outputLabel value="#{insuranceFormController.claimInsure.amountOfInsurance}">
                                        <f:convertNumber pattern="###,###0.00" type="currency"/>
                                    </h:outputLabel>
                                </p:column>
                                <p:column headerText="Insured Value (THB)">
                                    <h:outputLabel value="#{insuranceFormController.claimInsure.insuredValue}">
                                        <f:convertNumber pattern="###,###" type="currency"/>
                                    </h:outputLabel>
                                </p:column>
                                <p:column headerText="#{msg.label_rate}">
                                    <pe:inputNumber id="dtRate" symbol=" %" symbolPosition="s"
                                                    value="#{insuranceFormController.claimInsure.rate}"
                                                    decimalPlaces="4"
                                                    required="true"
                                                    requiredMessage="#{msg.require_generic}"/>
                                </p:column>
                                <p:column headerText="#{msg.label_premium}">
                                    <pe:inputNumber id="premiumRate" value="#{insuranceFormController.claimInsure.premiumRate}"
                                                    required="true"
                                                    requiredMessage="#{msg.require_generic}"/>
                                </p:column>
                                <f:facet name="footer">

                                    <h:outputLabel value="Total Premium : "/>
                                    <h:outputLabel id="lbPremiumRate" value="#{insuranceFormController.claimInsure.premiumRate}">
                                        <f:convertNumber pattern="###,###" type="currency"/>
                                    </h:outputLabel>
                                    <div class="EmptyBox10"/>
                                    <h:outputLabel value="Minimum Premium :"/>
                                    <h:outputLabel value="#{insuranceFormController.claimInsure.minimumPremiumRate}">
                                        <f:convertNumber pattern="###,###" type="currency"/>
                                    </h:outputLabel>

                                </f:facet>
                            </p:dataTable>
                        </fnc:disablePanel>
                    </div>

                </div>
            </div>

            <div class="Container100">
                <div class="ContainerIndent">

                    <div class="Responsive50">

                        <p:toolbar rendered="#{!insuranceFormController.readOnly}">
                            <f:facet name="right">
                                <p:commandButton value="#{msg.btn_save_draft}" 
                                                 icon="fa fa-save Fs14 White"
                                                 process="@form"
                                                 update="@form"
                                                 rendered="false"
                                                 action="#{insuranceFormController.save(2)}"/>
                                <p:dialog widgetVar="dlgSave" modal="true" onHide="window.location = ''">
                                    <p:messages id="messages" closable="false"/>
                                </p:dialog>
                                <p:commandButton type="button" value="#{msg.btn_discard}" 
                                                 icon="fa fa-trash Fs14 Resd" styleClass="RedButton"
                                                 onclick="PF('cmfDiscard').show()">
                                </p:commandButton>
                                <p:confirmDialog widgetVar="cmfDiscard" showEffect="fade" hideEffect="fade" 
                                                 header="#{msg.confirmation_head}" message="#{msg.confirmation_message_delete}">
                                    <p:commandButton value="#{msg.yes}" 
                                                     oncomplete="PF('cmfDiscard').hide();window.location=''" update="messagesDiscard"
                                                     immediate="true" styleClass="ui-confirmdialog-yes GreenButton" icon="ui-icon-check fa fa-check Fs14 white">

                                    </p:commandButton>
                                    <p:commandButton value="#{msg.btn_cancel}" onclick="PF('cmfDiscard').hide();" 
                                                     type="button" styleClass="ui-confirmdialog-no RedButton" icon="ui-icon-close fa fa-close Fs14 white" />
                                </p:confirmDialog>

                                <p:commandButton id="printCertHide" 
                                                 ajax="false"
                                                 process="@form"
                                                 update="@form"
                                                 style="display:none;"
                                                 onclick="PrimeFaces.monitorDownload(start, function () {
                                                             stop();
                                                             window.location = window.location;
                                                         });">
                                    <p:fileDownload value="#{insuranceFormController.getCertificateCopyFile(1)}" />
                                </p:commandButton>
                                <p:dialog widgetVar="dlgCancel" modal="true" onHide="window.location = 'insuranceForm.xhtml'">
                                    <p:messages id="messagesDiscard" closable="false"/>
                                </p:dialog> 
                                <p:commandButton value="#{msg.btn_print_preview}" immediate="true"
                                                 icon="fa fa-save Fs14 White" styleClass="OrangeButton" 
                                                 type="button" onclick="PF('printPreviewPopup').show()">
                                </p:commandButton>
                                <p:confirmDialog widgetVar="printPreviewPopup" 
                                                 header="#{msg.confirmation_head}" 
                                                 message="#{msg.msg_confirm_preview}"
                                                 showEffect="fade" hideEffect="fade">
                                    <p:commandButton value="#{msg.yes}" 
                                                     ajax="false"
                                                     process="@form"
                                                     update="@form"
                                                     styleClass="ui-confirmdialog-yes GreenButton"
                                                     onclick="PF('printPreviewPopup').hide();
                                                             PrimeFaces.monitorDownload(start, function () {
                                                                 stop();
                                                             });" 
                                                     icon="ui-icon-check fa fa-check Fs14 white">
                                        <p:fileDownload value="#{insuranceFormController.getCertificateCopyFile(0)}"/>
                                    </p:commandButton>
                                    <p:commandButton value="#{msg.btn_cancel}"
                                                     onclick="PF('printPreviewPopup').hide()"
                                                     type="button" styleClass="ui-confirmdialog-no RedButton" icon="ui-icon-close fa fa-close Fs14 white" />
                                </p:confirmDialog>

                                <p:commandButton value="#{msg.btn_print_cert}" immediate="true"
                                                 icon="fa fa-save Fs14 White" styleClass="OrangeButton" 
                                                 type="button" onclick="PF('printPopup').show()">
                                </p:commandButton>

                                <p:confirmDialog widgetVar="printPopup" 
                                                 header="#{msg.confirmation_head}" 
                                                 message="#{msg.msg_confirm_save}"
                                                 showEffect="fade" hideEffect="fade">
                                    <p:commandButton value="#{msg.yes}"
                                                     process="@form"
                                                     update="@form"
                                                     styleClass="ui-confirmdialog-yes GreenButton"
                                                     oncomplete="return printCert()" 
                                                     icon="ui-icon-check fa fa-check Fs14 white">
                                    </p:commandButton>
                                    <p:commandButton value="#{msg.btn_cancel}"
                                                     onclick="PF('printPopup').hide()"
                                                     type="button" styleClass="ui-confirmdialog-no RedButton" icon="ui-icon-close fa fa-close Fs14 white" />
                                </p:confirmDialog>

                                <p:dialog widgetVar="cmPrintDone" showEffect="fade" modal="true" onHide="PF('cmPrintDone').hide();location.href = ''">
                                    <div class="ui-messages ui-widget" aria-live="polite">
                                        <div class="ui-messages-info ui-corner-all">
                                            <span class="ui-messages-info-icon"></span>
                                            <ul>
                                                <li><span class="ui-messages-info-summary">#{msg.label_gen_cert_success}</span></li>
                                            </ul>
                                        </div>
                                    </div>
                                </p:dialog>
                            </f:facet>

                        </p:toolbar>
                        <p:toolbar rendered="#{insuranceFormController.readOnly}">
                            <f:facet name="right"> 
                                <p:commandButton value="#{msg.btn_print_debit_note}" immediate="true"
                                                 icon="fa fa-save Fs14 White" styleClass="OrangeButton" 
                                                 type="button" onclick="PF('printDebitNotePopup').show()">
                                </p:commandButton>
                                <p:commandButton value="#{msg.btn_company_copy}" immediate="true"
                                                 rendered="false"
                                                 icon="fa fa-save Fs14 White" styleClass="BlueButton" 
                                                 type="button" onclick="PF('printCopyPopup').show()">
                                </p:commandButton>
                                <p:commandButton value="#{msg.btn_dupp_copy}" immediate="true"
                                                 icon="fa fa-save Fs14 White" styleClass="BlueButton" 
                                                 type="button" onclick="PF('printCopyDupp').show()">
                                </p:commandButton>
                                <p:commandButton value="#{msg.btn_insure_copy}" immediate="true"
                                                 icon="fa fa-save Fs14 White" styleClass="BlueButton" 
                                                 type="button" onclick="PF('printInsureCopy').show()">
                                </p:commandButton>
                                <p:commandButton value="#{msg.btn_producer_copy}" immediate="true"
                                                 icon="fa fa-save Fs14 White" styleClass="BlueButton" 
                                                 type="button" onclick="PF('printProducerCopy').show()"
                                                 rendered="false">
                                </p:commandButton>
                                <p:commandButton value="#{msg.btn_office_copy}" immediate="true"
                                                 icon="fa fa-save Fs14 White" styleClass="BlueButton" 
                                                 type="button" onclick="PF('printOfficeCopy').show()"
                                                 rendered="false">
                                </p:commandButton>

                                <p:confirmDialog widgetVar="printDebitNotePopup" 
                                                 header="#{msg.confirmation_head}" 
                                                 message="#{msg.msg_confirm_save}"
                                                 showEffect="fade" hideEffect="fade">
                                    <p:commandButton value="#{msg.yes}" 
                                                     ajax="false" onclick="PF('printDebitNotePopup').hide();
                                                             PrimeFaces.monitorDownload(start, function () {
                                                                 stop();
                                                                 location.reload();
                                                             })" 
                                                     process="@this"
                                                     styleClass="ui-confirmdialog-yes GreenButton" 
                                                     icon="ui-icon-check fa fa-check Fs14 white">
                                        <p:fileDownload value="#{insuranceFormController.getDebitNote()}"/>
                                    </p:commandButton>
                                    <p:commandButton value="#{msg.btn_cancel}"
                                                     onclick="PF('printDebitNotePopup').hide()"
                                                     type="button" styleClass="ui-confirmdialog-no RedButton" icon="ui-icon-close fa fa-close Fs14 white" />
                                </p:confirmDialog>
                                <p:confirmDialog widgetVar="printCopyPopup" 
                                                 rendered="false"
                                                 header="#{msg.confirmation_head}" 
                                                 message="#{msg.msg_confirm_save}"
                                                 showEffect="fade" hideEffect="fade">
                                    <p:commandButton value="#{msg.yes}" 
                                                     ajax="false" onclick="PF('printCopyPopup').hide();
                                                             PrimeFaces.monitorDownload(start, stop)" 
                                                     process="@this"
                                                     styleClass="ui-confirmdialog-yes GreenButton" 
                                                     icon="ui-icon-check fa fa-check Fs14 white">
                                        <p:fileDownload value="#{insuranceFormController.getCertificateCopyFile('6')}"/>
                                    </p:commandButton>
                                    <p:commandButton value="#{msg.btn_cancel}"
                                                     onclick="PF('printCopyPopup').hide()"
                                                     type="button" styleClass="ui-confirmdialog-no RedButton" icon="ui-icon-close fa fa-close Fs14 white" />
                                </p:confirmDialog>

                                <p:confirmDialog widgetVar="printCopyDupp" 
                                                 header="#{msg.confirmation_head}" 
                                                 message="#{msg.msg_confirm_save}"
                                                 showEffect="fade" hideEffect="fade">
                                    <p:commandButton value="#{msg.yes}" 
                                                     ajax="false" onclick="PF('printCopyDupp').hide();
                                                             PrimeFaces.monitorDownload(start, stop)"
                                                     process="@this"
                                                     styleClass="ui-confirmdialog-yes GreenButton" 
                                                     icon="ui-icon-check fa fa-check Fs14 white" oncomplete="window.location = ''">
                                        <p:fileDownload value="#{insuranceFormController.getCertificateCopyFile('2')}"/>
                                    </p:commandButton>
                                    <p:commandButton value="#{msg.btn_cancel}"
                                                     onclick="PF('printCopyDupp').hide()"
                                                     type="button" styleClass="ui-confirmdialog-no RedButton" icon="ui-icon-close fa fa-close Fs14 white" />
                                </p:confirmDialog>

                                <p:confirmDialog widgetVar="printInsureCopy" 
                                                 header="#{msg.confirmation_head}" 
                                                 message="#{msg.msg_confirm_save}"
                                                 showEffect="fade" hideEffect="fade">
                                    <p:commandButton value="#{msg.yes}" 
                                                     ajax="false" onclick="PF('printInsureCopy').hide();
                                                             PrimeFaces.monitorDownload(start, stop)"
                                                     process="@this"
                                                     styleClass="ui-confirmdialog-yes GreenButton" 
                                                     icon="ui-icon-check fa fa-check Fs14 white" oncomplete="window.location = ''">
                                        <p:fileDownload value="#{insuranceFormController.getCertificateCopyFile('3')}"/>
                                    </p:commandButton>
                                    <p:commandButton value="#{msg.btn_cancel}"
                                                     onclick="PF('printInsureCopy').hide()"
                                                     type="button" styleClass="ui-confirmdialog-no RedButton" icon="ui-icon-close fa fa-close Fs14 white" />
                                </p:confirmDialog>

                                <p:confirmDialog widgetVar="printProducerCopy" 
                                                 header="#{msg.confirmation_head}" 
                                                 message="#{msg.msg_confirm_save}"
                                                 showEffect="fade" hideEffect="fade">
                                    <p:commandButton value="#{msg.yes}" 
                                                     ajax="false" onclick="PF('printProducerCopy').hide();
                                                             PrimeFaces.monitorDownload(start, stop)"
                                                     process="@this"
                                                     styleClass="ui-confirmdialog-yes GreenButton" 
                                                     icon="ui-icon-check fa fa-check Fs14 white" oncomplete="window.location = ''">
                                        <p:fileDownload value="#{insuranceFormController.getCertificateCopyFile('4')}"/>
                                    </p:commandButton>
                                    <p:commandButton value="#{msg.btn_cancel}"
                                                     onclick="PF('printProducerCopy').hide()"
                                                     type="button" styleClass="ui-confirmdialog-no RedButton" icon="ui-icon-close fa fa-close Fs14 white" />
                                </p:confirmDialog>

                                <p:confirmDialog widgetVar="printOfficeCopy" 
                                                 header="#{msg.confirmation_head}" 
                                                 message="#{msg.msg_confirm_save}"
                                                 showEffect="fade" hideEffect="fade">
                                    <p:commandButton value="#{msg.yes}" 
                                                     ajax="false" onclick="PF('printOfficeCopy').hide();
                                                             PrimeFaces.monitorDownload(start, stop)"
                                                     process="@form"
                                                     styleClass="ui-confirmdialog-yes GreenButton" 
                                                     icon="ui-icon-check fa fa-check Fs14 white" oncomplete="window.location = ''">
                                        <p:fileDownload value="#{insuranceFormController.getCertificateCopyFile('5')}"/>
                                    </p:commandButton>
                                    <p:commandButton value="#{msg.btn_cancel}"
                                                     onclick="PF('printOfficeCopy').hide()"
                                                     type="button" styleClass="ui-confirmdialog-no RedButton" icon="ui-icon-close fa fa-close Fs14 white" />
                                </p:confirmDialog>

                            </f:facet>

                        </p:toolbar>

                    </div>

                </div>
                <p:stack icon="/resources/images/dock/stack.png" expanded="false" rendered="false">
                    <p:menuitem value="#{msg.btn_discard}" icon="/resources/images/dock/Cancel-48.png" url="#"/>
                    <p:menuitem value="#{msg.btn_save}" icon="/resources/images/dock/Checked-48.png" url="#"/>
                    <p:menuitem value="Draft" icon="/resources/images/dock/Document-48.png" url="#"/>
                </p:stack>
            </div>

            <style>
                .ui-panelgrid .ui-panelgrid-cell{
                    padding: 12px 10px!important;
                }
            </style>
            <p:remoteCommand name="checkInsuredVale" actionListener="#{insuranceFormController.checkInsuredVale()}" 
                             oncomplete="handleComplete(xhr, status, args)"/>
            <script>
                $("#form\\:originCountryCode").attr("style", "");
                $("#form\\:destinationCountryCode").attr("style", "");
                //<![CDATA[

                function printCert() {
                    if (checkMaxInsureValue()) {
                        PF('genericDialog').show();
                        PF('printPopup').hide();
                        return false;
                    }

                    checkInsuredVale();
                    return false;
                }
                var maxOfInsureValue = "#{insuranceFormController.maxOfInsureValue}";
                function checkMaxInsureValue() {
                    var insureValue = $('#form\\:localAmountOfInsurance_input').val().replace(/,/g, '');
                    return (parseInt(insureValue) > parseInt(maxOfInsureValue));
                }
                function handleComplete(xhr, status, args) {
                    console.log(args);
                    if (!args.isDuplicateValue) {
                        $("#form\\:printCertHide").click();
                        PF('printPopup').hide();
                        start();
                    } else {
                        PF('printPopup').hide();
                        return false;
                    }
                }
                //]]>
            </script>

            <p:dialog id="genericDialog" widgetVar="genericDialog" showEffect="fade" modal="true" 
                      onHide="PF('genericDialog').hide();">
                <div class="ui-messages ui-widget" aria-live="polite">
                    <div class="ui-messages-error ui-corner-all">
                        <span class="ui-messages-error-icon"></span>
                        <ul>
                            <li>
                                <span class="ui-messages-error-summary">Insure Value must be less than 
                                    <p:outputLabel value="#{insuranceFormController.maxOfInsureValue}">
                                        <f:convertNumber pattern="###,###.##"/>
                                    </p:outputLabel>
                                </span>
                            </li>
                        </ul>
                    </div>
                </div>
            </p:dialog>  

            <style>
                .ui-inputfield{
                    width: 90% ;
                    /*max-width: 250px;*/
                }
                .ui-selectonemenu{
                    width: 79% ;
                    /*max-width: 218px;*/
                }
                .ui-selectonemenu-label{
                    width: 100% ;
                    /*max-width: 218px;*/
                } 
                .ui-state-disabled {
                    cursor: default !important;
                    border-bottom: solid 1px #fbfcfd!important;
                }

            </style>
        </h:form>
    </ui:define>

</ui:composition>