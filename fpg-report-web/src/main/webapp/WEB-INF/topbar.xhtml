<ui:composition 

    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:toto="http://java.sun.com/jsf/composite/components">

    <h:form>
        <!-- TOPBAR START -->
        <div id="layout-topbar">
            <a id="menu-button" class="Animated1">
                <span id="menuline1" class="Animated05"></span>
                <span id="menuline2" class="Animated05"></span>
                <span id="menuline3" class="Animated05"></span>
            </a>
            <a href="#"><h:graphicImage name="logo-1.png" id="logo" style="margin-left: 25px" library="images" width="180"/></a>

            <a id="topmenu-button" class="Animated1">
                <i class="icon-list2"></i>
            </a>

            <ul id="top-menu">
                <li>
                    <a class="menulink Animated05"><i class="icon-settings"></i> <span>Settings</span></a>
                    <ul style="margin-left:-145px;">
                        <!--<li><a href="#"><i class="icon-brightness Fs18 Fleft MarRight10"></i> <span class="FontAdamantiumBold"> Brightness</span></a></li>-->
                        <li><a href="javascript:PF('dlg3').show()"><i class="icon-key-stroke Fs18 Fleft MarRight10"></i> <span class="FontAdamantiumBold"> #{msg.change_password_header}</span></a></li>
                        <!--<li><a href="#"><i class="icon-attachment Fs18 Fleft MarRight10"></i> <span class="FontAdamantiumBold"> Attachments</span></a></li>-->
                        <li><a href="javascript:PF('cmLogout').show()"><i class="icon-lock-stroke Fs18 Fleft MarRight10"></i> <span class="FontAdamantiumBold"> #{msg.logout}</span></a></li>
                    </ul>
                </li>
            </ul>
            <p:dialog header="#{msg.change_password_header}" widgetVar="dlg3"
                      showEffect="explode" hideEffect="bounce" height="250" minimizable="true" maximizable="true" responsive="true">
                <h:form id="formChangePassword">
                    <div class="Container100">
                        <div class="ContainerIndent">
                            <div class="Container100 Responsive100">
                                <div class="ContainerIndent">
                                    <h2 class="BigTopic"></h2>
                                    <p:panelGrid id="pnGridChangePWD" columns="2"
                                                 style="border:0px !important; background:none;" styleClass="ui-panelgrid-blank">
                                        <h:outputLabel value="#{msg.old_password}"/>
                                        <h:panelGroup>
                                            <p:password id="oldPassword" value="#{changePasswordController.oldPassword}" required="true" requiredMessage="#{msg.require_generic}"/>
                                            <h:outputLabel value=" *" styleClass="requireField"/>
                                            <div style="width: 200px">
                                                <p:message for="oldPassword"/>
                                            </div>
                                        </h:panelGroup>
                                        <h:outputLabel value="#{msg.new_password}"/>
                                        <h:panelGroup>
                                            <p:password id="newPassword" value="#{changePasswordController.newPassword}" required="true" requiredMessage="#{msg.require_generic}"/>
                                            <h:outputLabel value=" *" styleClass="requireField"/>
                                            <div style="width: 200px">
                                                <p:message for="newPassword"/>
                                            </div>
                                        </h:panelGroup>
                                        <h:outputLabel value="#{msg.confirm_new_password}"/>
                                        <h:panelGroup>
                                            <p:password id="confirmNewPassword" value="#{changePasswordController.confirmNewPassword}" required="true" requiredMessage="#{msg.require_generic}"/>
                                            <h:outputLabel value=" *" styleClass="requireField"/>
                                            <div style="width: 200px">
                                                <p:message for="confirmNewPassword"/>
                                            </div>
                                        </h:panelGroup>
                                        <p:separator/>
                                        <p:commandButton value="#{msg.btn_save}"
                                                         process="pnGridChangePWD"
                                                         styleClass="OrangeButton"
                                                         update="pnGridChangePWD , changePWDMessage"
                                                         action="#{changePasswordController.changePassword()}"/>
                                    </p:panelGrid>
                                </div>
                            </div>

                        </div>
                    </div>
                    <p:dialog widgetVar="cmAlertChangePWD" showEffect="fade">
                        <p:messages id="changePWDMessage"/>
                    </p:dialog>
                </h:form>
            </p:dialog>
            <p:dialog widgetVar="cmLogout" showEffect="fade"
                      header="#{msg.msg_confirm_logout}">
                <p:commandButton value="#{msg.yes}" type="button" styleClass="ui-confirmdialog-yes GreenButton" onclick="window.location = '${request.contextPath}/LogoutController';" icon="ui-icon-check fa fa-check Fs14 white" />
                <p:commandButton value="#{msg.btn_close}" type="button" styleClass="ui-confirmdialog-no RedButton" icon="ui-icon-close fa fa-close Fs14 white" onclick="PF('cmLogout').hide()"/>
            </p:dialog>
            <script>
                function logout() {
                    if (confirm('#{msg.msg_confirm_logout}')) {
                        console.log("${request.contextPath}");
                        window.location = '${request.contextPath}/LogoutController';
                        return true;
                    }
                    return false;
                }
            </script>
        </div>
        <!-- TOPBAR END -->
    </h:form>
</ui:composition>
